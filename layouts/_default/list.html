{{ define "main" }}
  <article class="pa3 pa4-ns nested-copy-line-height nested-img">
  <main class="cf ph3 ph5-l pv3 pv4-l f4 tc-l center measure-wide lh-copy mid-gray">
    {{- .Content -}}
  </main>
    <section class="flex-ns flex-wrap justify-around mt5">
      {{ range .Paginator.Pages }}
        <div class="relative w-100 w-30-l mb4 bg-white">
          <div class="summary">
            <a href="{{ .URL }}">
              {{ with .Params.thumbnail }}
                <div class="thumbnail"><img src="{{ relURL . }}" alt="Thumbnail" />
                </div>
              {{ else }}
                {{ $img := findRE "<img src=\"[^\"]+\"" .Content 1 }}
                {{ range $img }}
                <div class="thumbnail">
                  {{ (print . " alt=\"Thumbnail\" />") | safeHTML }}
                </div>
              {{ end }}
              {{ with .Description }}
                {{ $.Scratch.Set "summary" (markdownify .) }}
              {{ else }}
                {{ $.Scratch.Set "summary"
                  ((delimit (findRE "(<p.*?>.*?</p>\\s*)+" .Content) "[&hellip;] ") |
                  plainify |
                  truncate (default 200 .Site.Params.summary_length)
                  (default " &hellip;" .Site.Params.text.truncated ) |
                  replaceRE "&amp;" "&" | safeHTML) }}
               {{ end }}
              {{ $.Scratch.Get "summary" }}
            </a>
          </div>
        </div>
      {{ end }}
    </section>
    {{- template "_internal/pagination.html" . -}}
  </article>
{{ end }}